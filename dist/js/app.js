!function(window,angular){"use strict";var constants={url:"https://nationalsme.ae/",api:"https://api.nationalsme.ae/",views:"views/",session_ns:"NNSME"};angular.module("app",["ui.router","ngAnimate","angularValidator"]).constant("CONFIG",constants)}(window,window.angular),function(window,angular){"use strict";var Config=["$stateProvider","$httpProvider","$urlRouterProvider","CONFIG",function($stateProvider,$httpProvider,$urlRouterProvider,CONFIG){$httpProvider.interceptors.push("AuthInterceptor"),$stateProvider.state("ui",{url:"/ui",templateUrl:CONFIG.views+"ui/index.html",controller:"Ui",controllerAs:"vm_ui"}).state("login",{url:"/access/login",templateUrl:CONFIG.views+"access/login.html",controller:"Login",controllerAs:"vm_login"}).state("forgot_password",{url:"/access/forgot-password",templateUrl:CONFIG.views+"access/forgot_password.html",controller:"ForgotPassword",controllerAs:"vm_forgot"}).state("registration",{url:"/access/registration",templateUrl:CONFIG.views+"access/registration.html",controller:"Registration",controllerAs:"vm_registration"}).state("welcome",{url:"/welcome",templateUrl:CONFIG.views+"access/welcome.html"}).state("starting",{url:"/starting",templateUrl:CONFIG.views+"starting/index.html",controller:"Starting",controllerAs:"vm_starting"}).state("quick_setup",{url:"/quick-setup",templateUrl:CONFIG.views+"quick_setup/form.html",controller:"QuickSetup",controllerAs:"vm_quick"}).state("categories",{url:"/quick-setup/quick-setup-categories",templateUrl:CONFIG.views+"quick_setup/categories.html",controller:"QuickSetupCategories",controllerAs:"vm_quick_cat"}).state("offers_param",{url:"/offers/:params",templateUrl:CONFIG.views+"offers/list.html",controller:"OfferList",controllerAs:"vm_offers"}).state("offers_detail",{url:"/offers/detail/:offer_id",templateUrl:CONFIG.views+"offers/detail.html",controller:"OfferDetail",controllerAs:"vm_offer"}).state("messages",{url:"/messages/list",templateUrl:CONFIG.views+"messages/list.html",controller:"MessagesList",controllerAs:"vm_msg_list"}).state("messages_tread",{url:"/messages/tread/:id",templateUrl:CONFIG.views+"messages/tread.html",controller:"MessagesTread",controllerAs:"vm_msg_tread"}).state("highlights",{url:"/highlights",templateUrl:CONFIG.views+"highlights/home.html",controller:"HighlightsHome",controllerAs:"vm_highlights_home"}).state("highlights_detail",{url:"/highlights/:id",templateUrl:CONFIG.views+"highlights/detail.html",controller:"HighlightsDetail",controllerAs:"vm_highlights_detail"}).state("network",{url:"/network",templateUrl:CONFIG.views+"network/list.html",controller:"Network",controllerAs:"vm_network"}).state("profile",{url:"/profile",templateUrl:CONFIG.views+"profile/home.html",controller:"Profile",controllerAs:"vm_profile"}).state("profile_third",{url:"/profile/company/:id",templateUrl:CONFIG.views+"profile/home.html",controller:"Profile",controllerAs:"vm_profile"}).state("profile_offers",{url:"/profile/offers/:params",templateUrl:CONFIG.views+"offers/list.html",controller:"OfferList",controllerAs:"vm_offers"}).state("profile_account",{url:"/profile/account",templateUrl:CONFIG.views+"account/home.html",controller:"AccountHome",controllerAs:"vm_account"}).state("settings",{url:"/settings",templateUrl:CONFIG.views+"settings/home.html",controller:"Settings",controllerAs:"vm_settings"}).state("error",{url:"/error/:status",templateUrl:CONFIG.views+"error/index.html",controller:"Error",controllerAs:"vm_error"}),$urlRouterProvider.otherwise("/access/login")}],Ready=["$rootScope","$state","UserSession","Storage","CONFIG","HistoryHandler",function($rootScope,$state,UserSession,Storage,CONFIG,HistoryHandler){$rootScope.$on("$stateChangeStart",function(event,toState,toParams,fromState){var html=angular.element(document.querySelector("html"));html.removeClass("menu--opened"),HistoryHandler.Push(toState,fromState)}),$rootScope.$on("$stateChangeSuccess",function(){}),$rootScope.$on("$viewContentLoading",function(){}),$rootScope.$on("$viewContentLoaded",function(){}),$rootScope.$on("$stateNotFound",function(){$state.go("error",{status:404})}),$rootScope.$on("$stateChangeError",function(){$state.go("error",{status:404})})}];angular.module("app").config(Config).run(Ready)}(window,window.angular),function(window,angular,undefined){"use strict";var ArrayClean=function(){return function(input){var arr=input.filter(function(item){return item!==undefined});return arr}},ArrayIndexOf=function(){return function(input,value){var arr=input.filter(function(item){return item===value});return arr}},ArrayDeepIndexOf=function(){return function(input,value,key,sub_key){var arr=input.filter(function(item){return sub_key?item[key][sub_key]===value:item[key]===value});return arr}};angular.module("app").filter("array_clean",ArrayClean).filter("array_indexOf",ArrayIndexOf).filter("array_deep_indexOf",ArrayDeepIndexOf)}(window,window.angular),function(window,angular){"use strict";var DateAgo=function(){return function(input){var now=(new Date).getTime(),date=new Date(input).getTime();return now>date}},DateComing=function(){return function(input){var now=(new Date).getTime(),date=new Date(input).getTime();return date>now}},DateIsToday=function(){return function(input){var now=new Date,date=new Date(input);return now=now.getMonth()+now.getDate()+now.getFullYear(),date=date.getMonth()+date.getDate()+date.getFullYear(),date===now}};angular.module("app").filter("date_ago",DateAgo).filter("date_coming",DateComing).filter("date_is_today",DateIsToday)}(window,window.angular),function(window,angular){"use strict";var EncodeString=function(){return function(input){var out=encodeURIComponent(input);return out}};angular.module("app").filter("encode_string",EncodeString)}(window,window.angular),function(window,angular){"use strict";var FriendlyUrl=function(){return function(input){var out=input.toLowerCase().replace(/[àáâãäå]/g,"a").replace(/[èéêë]/g,"e").replace(/[ìíîï]/g,"i").replace(/[òóôõö]/g,"o").replace(/[ùúûü]/g,"u").replace(/[ñ]/g,"n").replace(/[ç]/g,"c").replace(/[ýÿ]/g,"y").replace(/[\-\/\\\s]/g,"+");return out}};angular.module("app").filter("friendly_url",FriendlyUrl)}(window,window.angular),function(window,angular){"use strict";var ObjToQueryString=function(){return function(input){var out=[];return angular.forEach(input,function(val,key){out.push(key+"="+val)}),out.join("&")}},QueryStringToObj=function(){return function(input){var out={};return angular.forEach(input.split("&"),function(pair){var arr=pair.split("=");out[arr[0]]=arr[1]}),out}};angular.module("app").filter("obj_to_query_string",ObjToQueryString).filter("query_string_to_obj",QueryStringToObj)}(window,window.angular),function(window,angular){"use strict";var Broadcaster=["$rootScope",function($rootScope){var _this=this;return _this.Set=function(name){$rootScope.$broadcast(name)},_this.Transmit=function(broadcst_name,data){$rootScope.$broadcast(broadcst_name,data)},_this}];angular.module("app").factory("Broadcaster",Broadcaster)}(window,window.angular),function(window,angular){"use strict";var CategoriesHandler=["Storage","CONFIG",function(Storage,CONFIG){var _this=this;return _this.Merge=function(obj){var plain_categories=Storage.Get(CONFIG.session_ns+"Categories"),obj_categories=obj.Categories.join(" "),obj_subcategories=obj.SubCategories.join(" ");return angular.forEach(plain_categories,function(cat){var reg_cat=new RegExp("\\b"+cat.Id+"\\b");cat.SubsCount=0,obj_categories.match(reg_cat)&&(cat.Selected=!0),angular.forEach(cat.Subcategories,function(subcat){var reg_sub=new RegExp("\\b"+subcat.Id+"\\b");obj_subcategories.match(reg_sub)&&(subcat.Selected=!0,cat.SubsCount++)})}),plain_categories},_this.PrepareToSend=function(obj){var plain_categories={Categories:[],SubCategories:[]};return angular.forEach(obj,function(cat){cat.SubsCount>0&&plain_categories.Categories.push(cat.Id),angular.forEach(cat.Subcategories,function(sub){sub.Selected&&plain_categories.SubCategories.push(sub.Id)})}),plain_categories},_this}];angular.module("app").factory("CategoriesHandler",CategoriesHandler)}(window,window.angular),function(window,angular){"use strict";var HelperDate=[function(){var _this=this;return _this.GetTotalDays=function(){},_this.DaysInTheMonth=function(month,year){return new Date(year,month,0).getDate()},_this.DifferenceDays=function(date){date=new Date(date).getTime();var result={left:0,late:0},now=(new Date).getTime(),day=864e5,diff=now-date;return 0>diff?result.left=parseInt(Math.abs(diff)/day):diff>0&&(result.late=parseInt(diff/day)),result},_this}];angular.module("app").factory("HelperDate",HelperDate)}(window,window.angular),function(window,angular){"use strict";var HistoryHandler=["$rootScope","Storage","CONFIG",function($rootScope,Storage,CONFIG){var _this=this;return _this.Push=function(to,from){$rootScope.view_transition=null,angular.element(document.querySelectorAll("[ui-view]")[0]).removeClass("fade go-back go-forward"),null===Storage.Get(CONFIG.session_ns+"History")&&Storage.Set(CONFIG.session_ns+"History",[]);var history=Storage.Get(CONFIG.session_ns+"History");if($rootScope.view_transition=null,history.length&&"error"!==to.url.split("/")[1]&&to.url.split("/")[1]!==history[history.length-1].split("/")[1])history=[to.url];else if(-1!==history.indexOf(to.url)){var index=history.indexOf(to.url),total=history.length;history.splice(index+1,total),$rootScope.view_transition="go-back"}else history.push(from["abstract"]?to.url:from.url),$rootScope.view_transition=from["abstract"]?"fade":"go-forward";Storage.Update(CONFIG.session_ns+"History",history)},_this}];angular.module("app").factory("HistoryHandler",HistoryHandler)}(window,window.angular),function(window,angular,undefined){"use strict";var AuthInterceptor=["$q","$injector","ServerFeedback","CONFIG","Storage","UserSession","Loader",function($q,$injector,ServerFeedback,CONFIG,Storage,UserSession){var error_handler=function(type,rejection){{var is_service=rejection.config?-1!=rejection.config.url.indexOf(CONFIG.api):!0;rejection.status?rejection.status:"500"}is_service&&ServerFeedback.Error({message:rejection.data&&rejection.data.Message?rejection.data.Message:"An error has occurred",position:"top"})};return{request:function(config){var is_service=-1!=config.url.indexOf(CONFIG.api);if(is_service){UserSession.CheckToken(function(){$q.reject(config)}),"content-file"===config.headers["Content-Type"]?config.headers={"Content-Type":undefined}:"POST"==config.method.toUpperCase()&&-1!=config.url.indexOf("Login")?config.headers["Content-Type"]="application/x-www-form-urlencoded":config.headers={"Content-Type":"application/json",Accept:"application/json, text/javascript"};var user_session=Storage.Get(CONFIG.session_ns);user_session&&user_session.accessToken&&(config.headers.Authorization=user_session.tokenType+" "+user_session.accessToken)}else UserSession.CheckArea(function(){$q.reject(config)});return config},requestError:function(rejection){return error_handler("Request",rejection),$q.reject(rejection)},response:function(response){return response},responseError:function(rejection){return error_handler("Response",rejection),$q.reject(rejection)}}}];angular.module("app").factory("AuthInterceptor",AuthInterceptor)}(window,window.angular),function(window,angular){"use strict";var Loader=["$timeout",function(){var _this=this;_this.Settings={id:null,positionTarget:document.querySelector("body"),top:0,left:0,className:"spinner",parent:document.querySelector("body"),el:null,originalSettings:null,callback:null,callbackStart:null,callbackEnd:null},_this.SetPosition=function(){for(var y=0,x=0,el=_this.Settings.positionTarget;el&&!isNaN(el.offsetLeft)&&!isNaN(el.offsetTop);)x+=el.offsetLeft-el.scrollLeft,y+=el.offsetTop-el.scrollTop,el=el.offsetParent;return x+=_this.Settings.left,y+=_this.Settings.top,{top:y,left:x}};{var svg=['<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="20" height="20" fill="white" id="[ID]" class="[CLASS]" style="[STYLE]">','<path opacity=".25" d="M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"/>','<path d="M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z">','<animateTransform attributeName="transform" type="rotate" from="0 16 16" to="360 16 16" dur="0.3s" repeatCount="indefinite" />',"</path>","</svg>"].join("");['<svg width="50" height="50" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="uil-ring">','<rect x="0" y="0" width="100" height="100" fill="none" class="bk">',"</rect>",'<circle cx="50" cy="50" r="40" stroke-dasharray="163.36281798666926 87.9645943005142" stroke="#595b61" fill="none" stroke-width="20">','<animateTransform attributeName="transform" type="rotate" values="0 50 50;180 50 50;360 50 50;" keyTimes="0;0.5;1" dur=".3s" repeatCount="indefinite" begin="0s">',"</animateTransform>","</circle>","</svg>"].join("")}_this.Start=function(){var position=_this.SetPosition();_this.Settings.id="ui-loader_"+(new Date).getTime();var pos=[];position.top>0&&pos.push("top: "+position.top+(-1!=position.top.toString().indexOf("%")?"":"px")),position.left>0&&pos.push("left: "+position.left+(-1!=position.left.toString().indexOf("%")?"":"px"));var buffer=svg.replace("[ID]",_this.Settings.id).replace("[CLASS]","ui-loader ui-loader--"+_this.Settings.className+" show").replace("[STYLE]",pos.join(";")),position_type="body"!=_this.Settings.parent.tagName.toLowerCase()?"relative":"";angular.element(_this.Settings.parent).css("position",position_type).append(buffer),_this.Settings.el=angular.element(document.querySelector("#"+_this.Settings.id)),"function"==typeof _this.Settings.callbackStart&&_this.Settings.callbackStart()},_this.End=function(el){el?el.remove():(_this.Settings.el.remove(),_this.Settings.className="spinner"),"function"==typeof _this.Settings.callbackEnd&&_this.Settings.callbackEnd()},"function"==typeof _this.Settings.callback&&_this.Settings.callback(_this)}];angular.module("app").service("Loader",Loader)}(window,window.angular),function(window,angular){"use strict";var Modal=["$rootScope","$compile","$timeout","$document","$http","CONFIG",function($rootScope,$compile,$timeout,$document,$http,CONFIG){var _this=this;return _this.Close=function(e,callback){e&&e.preventDefault();var modal=angular.element(document.querySelectorAll(".ui-modal"));modal.removeClass("ui-modal--show"),$document.off(),$timeout(function(){modal.remove(),"function"==typeof callback&&callback()},300)},_this.Open=function(config){var target=angular.element(document.querySelector(config.target?config.target:".content"));target.length||console.info("Modal: target is not specifiedand will be append directly on body.");var modal_id="ui-modal-id-"+parseInt((new Date).getTime());target.append('<div class="ui-modal" id="'+modal_id+'"><div class="ui-modal__content"><div class="ui-modal__replacer"></div></div></div>');var modal_el=angular.element(document.querySelector("#"+modal_id)),modal_content=angular.element(document.querySelector("#"+modal_id+" .ui-modal__content")),modal_replacer=modal_content.find("div");modal_el.addClass("ui-modal--show");var scope=config.scope?config.scope:$rootScope.$new(),promise=$http.get(CONFIG.views+config.url).then(function(res){modal_replacer.replaceWith($compile(res.data)(scope)),modal_content.addClass("ui-modal__content--show"),angular.element(document.querySelectorAll(".ui-modal__close")).on("click",function(e){("#"===angular.element(this).attr("href")||"#/"===angular.element(this).attr("href"))&&e.preventDefault(),_this.Close()})});return $document.on("keyup",function(e){27==e.keyCode&&_this.Close()}),promise},_this}];angular.module("app").factory("Modal",Modal)}(window,window.angular),function(window,angular){"use strict";var Position=[function(){var _this=this;return _this.Get=function(el){for(var _x=0,_y=0;el&&!isNaN(el.offsetLeft)&&!isNaN(el.offsetTop);)_x+=el.offsetLeft-el.scrollLeft,_y+=el.offsetTop-el.scrollTop,el=el.offsetParent;return{top:_y,left:_x}},_this}];angular.module("app").service("Position",Position)}(window,window.angular),function(window,angular){"use strict";var ServerFeedback=["$timeout","$document","Position",function($timeout,$document,Position){var _this=this,stack=[],display=function(settings){var id="fs_"+(new Date).getTime();stack.push(id);var tmpl=['<div class="ui-server-feedback ui-server-feedback__'+settings.type+" ui-server-feedback__"+settings.position+'" id="'+id+'">','<span class="ui-server-feedback__title">',settings.title,"</span>",settings.message,"</div>"].join("");settings.target&&settings.target.length&&settings.position.indexOf("tooltip")<0?settings.target.css("position","relative").append(tmpl):$document.find("body").append(tmpl);var el=angular.element(document.querySelector("#"+id));if(-1!==settings.position.indexOf("tooltip")){if(-1!==settings.position.indexOf("left")&&-1!==settings.position.indexOf("right")&&!settings.target&&!settings.target.length)return console.info("Server Feedback: You cannot set left and right position and the same element."),!1;var target_coord=Position.Get(settings.target[0]);-1!==settings.position.indexOf("top")&&el.css({top:target_coord.top-el[0].offsetHeight-10+"px"}),-1!==settings.position.indexOf("bottom")&&el.css({top:target_coord.top+settings.target[0].offsetHeight+10+"px"}),-1!==settings.position.indexOf("left")&&el.css({left:target_coord.left+"px"}),-1!==settings.position.indexOf("right")&&el.css({left:target_coord.left-Math.abs(el[0].offsetWidth-settings.target[0].offsetWidth)+"px"}),-1!==settings.position.indexOf("center")&&el.css({left:"50%",marginLeft:el[0].offsetWidth/2*-1+"px"})}else-1!==settings.position.indexOf("center")&&el.css({marginLeft:el[0].offsetWidth/2*-1+"px"}),-1!==settings.position.indexOf("middle")&&el.css({marginTop:el[0].offsetHeight/2*-1+"px"});$timeout(function(){el.addClass("show")},300),$timeout(function(){el.removeClass("show")},4500),$timeout(function(){el.remove()},4800)};return _this.Success=function(custom){var settings={title:custom.title?custom.title:"",message:custom.message?custom.message:"",position:custom.position?custom.position:"top_left",target:custom.target?custom.target:""};settings.type="success",display(settings)},_this.Error=function(custom){var settings={title:custom.title?custom.title:"",message:custom.message?custom.message:"",position:custom.position?custom.position:"top_left",target:custom.target?custom.target:""};settings.type="error",display(settings)},_this.Warning=function(custom){var settings={title:custom.title?custom.title:"",message:custom.message?custom.message:"",position:custom.position?custom.position:"top_left",target:custom.target?custom.target:""};settings.type="warning",display(settings)},_this}];angular.module("app").factory("ServerFeedback",ServerFeedback)}(window,window.angular),function(window,angular){"use strict";var Storage=[function(){var _this=this;return _this.Get=function(name){return JSON.parse(window.localStorage.getItem(name))},_this.Set=function(name,value){window.localStorage.setItem(name,JSON.stringify(value))},_this.Update=function(name,value){window.localStorage.removeItem(name),window.localStorage.setItem(name,JSON.stringify(value))},_this.Remove=function(param){if(!(param instanceof Array)&&"string"!=typeof param)return!1;if(param instanceof Array)for(var len=param.length,i=0;len>i;i++)window.localStorage.removeItem(param[i]);else window.localStorage.removeItem(param)},_this}];angular.module("app").factory("Storage",Storage)}(window,window.angular);var TouchHandler=function(_custom_settings){var _obj=this;_obj.settings={distanceXToFire:0,distanceYToFire:0,negative:!1,preventOnStart:!1,preventOnMove:!1,preventOnEnd:!1,target:null,fireOnLoad:function(){},fireOnStart:function(){},fireOnMove:function(){},fireOnEnd:function(){},touches:1},_obj.settings=angular.extend(_obj.settings,_custom_settings);var element_touched=_obj.settings.target?_obj.settings.target[0]:window;_obj.settings.fireOnLoad();var hasTouch="ontouchstart"in window,startEvent=hasTouch?"touchstart":"mousedown",moveEvent=hasTouch?"touchmove":"mousemove",endEvent=hasTouch?"touchend":"mouseup",start_position_x=null,start_position_y=null,swipe_distance_x=0,swipe_distance_y=0,unlock_x=!1,unlock_Y=!1;element_touched.addEventListener(startEvent,function(event){event.touches.length==_obj.settings.touches&&(start_position_x=event.touches[0].pageX,start_position_y=event.touches[0].pageY,_obj.settings.fireOnStart(event))},!1),element_touched.addEventListener(moveEvent,function(event){return event.stopPropagation(),_obj.settings.preventOnMove()&&start_position_y-event.touches[0].pageY<0&&event.preventDefault(),start_position_x||start_position_y?(swipe_distance_x=start_position_x-event.touches[0].pageX,swipe_distance_y=start_position_y-event.touches[0].pageY,void _obj.settings.fireOnMove(event,_obj.settings.target[0].scrollTop)):!1},!1),element_touched.addEventListener(endEvent,function(event){return start_position_x||start_position_y?(_obj.settings.distanceXToFire&&(unlock_x=_obj.settings.negative?Math.abs(swipe_distance_x)>=_obj.settings.distanceXToFire:0>swipe_distance_x&&Math.abs(swipe_distance_x)>=_obj.settings.distanceXToFire),_obj.settings.distanceYToFire&&_obj.settings.negative&&(unlock_y=_obj.settings.target[0].scrollTop<=0&&0>swipe_distance_y&&Math.abs(swipe_distance_y)>=_obj.settings.distanceYToFire),_obj.settings.fireOnEnd(event,unlock_x,unlock_y),start_position_x=null,start_position_y=null,swipe_distance_x=0,swipe_distance_y=0,unlock_x=!1,void(unlock_Y=!1)):!1},!1)};!function(window,angular){"use strict";var UserSession=["$location","Storage","CONFIG",function($location,Storage,CONFIG){var _this=this,sess_name=CONFIG.session_ns,forbidden_has_loged=["access","ui"],login_section="/access/login",start_section="/offers/";return _this.Data=null,_this.Message=null,_this.Create=function(obj,fork_start_section){Storage.Get(sess_name)&&Storage.Remove(sess_name);var data=obj;Storage.Set(sess_name,data),null!==Storage.Get(sess_name)&&(_this.Data=data),$location.path(fork_start_section?fork_start_section:start_section)},_this.Delete=function(expire_warning){Storage.Remove([sess_name,sess_name+"CompanyInfos",sess_name+"OfferTypes",sess_name+"Offer",sess_name+"UserInfos",sess_name+"GeoAll",sess_name+"History",sess_name+"Categories"]),angular.element(document.querySelectorAll("[ui-view]")).removeClass("fade go-back go-forward"),_this.Data=null,window.location.hash=expire_warning?"#"+path+"/expired":"#"+login_section},_this.Update=function(new_item){_this.Data[new_item.attr]=new_item.value,Storage.Remove(sess_name),Storage.Set(sess_name,_this.Data)},_this.PopulateData=function(){_this.Data||(_this.Data=Storage.Get(sess_name))},_this.CheckToken=function(){var token_valid=!1;return _this.Message="Fatiou, passou!",Storage.Get(sess_name)&&(_this.PopulateData(),(new Date).getTime()>Storage.Get(sess_name).expires?(_this.Message="Token expired.",_this.Delete(!0)):token_valid=!0),token_valid},_this.CheckArea=function(obj_rejected){var section=$location.$$path.split("/")[1];_this.Message="Fatiou, passou!",_this.CheckToken()&&forbidden_has_loged.indexOf(section)>=0&&(_this.Message="Unauthorized section for user has loged.",obj_rejected&&obj_rejected(),$location.path(start_section)),_this.CheckToken()||-1!=forbidden_has_loged.indexOf(section)||(_this.Message="Unauthorized section for user non loged.",obj_rejected&&obj_rejected(),$location.path(login_section))},_this}];angular.module("app").factory("UserSession",UserSession)}(window,window.angular),function(window,angular,undefined){"use strict";var CategorySet=["$timeout","Storage","CONFIG",function($timeout,Storage,CONFIG){return{restrict:"AE",template:['<form ng-submit="categoryCtrlCallback({event: $event})">','<div class="ui-category_set__categories" ng-if="category_set.show_cats">','<div class="ui-list">','<a ng-repeat="cat in category_set.matrix" href="#" ng-click="category_set.set_subview($event, $index)" class="ui-list__item">','<i class="ui-list__icon ui-list__icon--left icon-phone"></i>',"{{ cat.Name }}",'<div class="ui-list__icon_group--right">','<i class="ui-list__badge">{{ cat.SubsCount > 0 ? cat.SubsCount : "" }}</i>','<i class="ui-list__icon icon-arrow-circ-right"></i>',"</div>","</a>","</div>",'<button type="submit" class="ui-button ui-button--block">Send</button>',"</div>",'<div class="ui-category_set__subcategories" ng-if="category_set.show_subcats">','<div class="ui-list">','<span class="ui-list__item">',"Select all",'<div class="ui-list__icon_group--right">','<label class="ui-checkbox">','<input type="checkbox" name="check_all" ng-checked="category_set.subcats_set_all" ng-click="category_set.set_all($event)">',"<span></span>","</label>","</div>","</span>","</div>",'<div class="ui-list">','<span ng-repeat="subcat in category_set.selected_cat.Subcategories" class="ui-list__item">',"{{ subcat.Name }}",'<div class="ui-list__icon_group--right">','<label class="ui-checkbox">','<input type="checkbox" name="Subcategories" value="{{ subcat.Id }}" ng-checked="subcat.Selected">',"<span></span>","</label>","</div>","</span>","</div>",'<a href="#" class="ui-button ui-button--block" ng-click="category_set.done($event)">Back to categories</a>',"</div>","</form>"].join(""),scope:{categoryCtrlObj:"=",categoryCtrlCallback:"&"},link:function(scope,element,attrs){scope.category_set={matrix:scope.categoryCtrlObj&&scope.categoryCtrlObj.length?angular.copy(scope.categoryCtrlObj):Storage.Get(CONFIG.session_ns+"Categories"),selected_cat_index:null,selected_cat:[],subs_el:null,subcats_count:0,subcats_total:0,subcats_set_all:!1,show_cats:!0,show_subcats:!1,multiple:attrs.categoryMultiple!==undefined},angular.forEach(scope.category_set.matrix,function(item){item.SubsCount===undefined&&(item.SubsCount=0)}),scope.category_set.set_subview=function(e,index){e&&e.preventDefault(),scope.category_set.selected_cat_index=index,scope.category_set.selected_cat=scope.category_set.matrix[index],scope.category_set.subcats_total=scope.category_set.matrix[index].Subcategories.length,scope.category_set.subcats_set_all=scope.category_set.subcats_total==scope.category_set.matrix[index].SubsCount,scope.category_set.show_cats=!1,scope.category_set.show_subcats=!0,$timeout(function(){scope.category_set.subs_el=document.querySelectorAll('[name="Subcategories"]'),angular.element(scope.category_set.subs_el).bind("change",function(e){e.target.checked?scope.category_set.matrix[index].SubsCount++:scope.category_set.matrix[index].SubsCount--,angular.forEach(scope.category_set.subs_el,function(el,i){scope.category_set.selected_cat.Subcategories[i].Selected=el.checked}),scope.category_set.subcats_set_all=scope.category_set.subcats_total==scope.category_set.matrix[index].SubsCount,scope.$apply()})},250)},scope.category_set.done=function(e){e&&e.preventDefault(),scope.category_set.show_cats=!0,scope.category_set.show_subcats=!1,scope.category_set.multiple||angular.forEach(scope.category_set.matrix,function(item){item.Id!==scope.category_set.selected_cat.Id&&(item.SubsCount=0,angular.forEach(item.Subcategories,function(item_sub,j){item.Subcategories[j].Selected=!1}))}),scope.categoryCtrlObj=scope.category_set.matrix},scope.category_set.set_all=function(e){return e.target.checked===undefined?!1:(scope.category_set.selected_cat.SubsCount=e.target.checked?scope.category_set.subcats_total:0,void angular.forEach(scope.category_set.subs_el,function(el,i){el.checked=e.target.checked,scope.category_set.selected_cat.Subcategories[i].Selected=e.target.checked}))}}}}];angular.module("app").directive("categorySet",CategorySet)}(window,window.angular),function(window,angular){"use strict";var Change=[function(){return{restrict:"A",scope:{change:"&"},link:function(scope,element){element.bind("change",function(e){scope.change({event:e})})}}}];angular.module("app").directive("change",Change)}(window,window.angular),function(window,angular){"use strict";var CheckCompany=["$http","Loader","GeneralData",function($http,Loader,GeneralData){return{restrict:"A",scope:{ctrlFields:"="},link:function(scope,element){element.bind("blur",function(){Loader.Settings.parent=element.parent()[0],Loader.Start(),GeneralData.CompanyAll().then(function(res){var has=!1;for(var i in res.data)if(element.val().toLowerCase()==res.data[i].Name.toLowerCase()){has=!0;break}Loader.End()},function(){Loader.End()})})}}}];angular.module("app").directive("checkCompany",CheckCompany)}(window,window.angular),function(window,angular){"use strict";var CountryCityPair=["$http","Loader","GeneralData",function($http,Loader,GeneralData){return{restrict:"A",link:function(scope,element){scope.country_pair=[{$id:"1",Id:1,Name:"sample string 1",Code:"sample string 2",States:[{$id:"2",Id:1,Name:"sample string 1",Code:"sample string 2"}]},{$id:"2",Id:2,Name:"sample string 2",Code:"sample string 3",States:[{$id:"3",Id:1,Name:"sample string 3",Code:"sample string 3"}]}],scope.city_pair=[],Loader.Settings.parent=element.parent()[0],Loader.Start(),GeneralData.CountryCity().then(function(res){scope.country_pair=res.data,Loader.End()},function(){Loader.End()}),element.bind("change",function(e){var id=e.target.value;for(var i in scope.country_pair)if(scope.country_pair[i].Id==id){scope.city_pair=scope.country_pair[i].States;break}})}}}];angular.module("app").directive("countryCityPair",CountryCityPair)}(window,window.angular),function(window,angular){"use strict";var DateNormalize=["$timeout",function($timeout){return{require:"ngModel",restrict:"A",link:function(scope,element,attrs,ngModel){$timeout(function(){var today=new Date,bool_model=""===ngModel.$viewValue;bool_model&&element.attr("type","text"),element.bind("touchstart",function(){bool_model&&(element.attr("type","date"),ngModel=today)})},300)}}}];angular.module("app").directive("dateNormalize",DateNormalize)}(window,window.angular),function(window,angular){"use strict";var DisableOffer=["$location","OffersData","Loader",function($location,OffersData,Loader){return{restrict:"A",link:function(scope,element,attrs){var id=attrs.disableOffer;element.bind("click",function(e){e.preventDefault();var conf=confirm("Confirm disable this post?");conf&&(Loader.Settings.parent=element[0],Loader.Start(),OffersData.Disable(id).then(function(){Loader.End(),$location.path("/offers/")},function(){Loader.End()}))})}}}];angular.module("app").directive("disableOffer",DisableOffer)}(window,window.angular),function(window,angular){"use strict";var HighlightBySection=["$timeout",function(){return{restrict:"A",link:function(scope,element){var el_hash=element.attr("href"),win_hash=window.location.hash;console.log("el_hash: ",el_hash," - win_hash: ",win_hash)}}}];angular.module("app").directive("highlightBySection",HighlightBySection)}(window,window.angular),function(window,angular){"use strict";var InputDate=["$timeout",function(){return{restrict:"A",scope:{from:"=",until:"="},link:function(scope,element,attrs){var date_default=attrs.inputDate?new Date(attrs.inputDate):new Date;element.val(date_default),element.scope().$apply()}}}];angular.module("app").directive("inputDate",InputDate)}(window,window.angular),function(window,angular){"use strict";var Logout=["UserSession","Storage","CONFIG",function(UserSession){return{restrict:"A",link:function(scope,element){element.bind("click",function(e){e.preventDefault(),UserSession.Delete()})}}}];angular.module("app").directive("logout",Logout)}(window,window.angular),function(window,angular,undefined){var MapLocation=[function(){return{restrict:"A",scope:{ctrlCoords:"="},link:function(scope,element,attrs){scope.$watch("ctrlCoords",function(){null!==scope.ctrlCoords&&scope.ctrlCoords!==undefined&&(element.addClass("show"),go())});var go=function(){var geocoder=new google.maps.Geocoder,coords=scope.ctrlCoords.replace("POINT (","").replace(")","").split(" "),lat=coords[0],lng=coords[1],formatted_address="",map_html=null,edit_mode=attrs.ctrlAddressField!==undefined,render_map=function(){var width=element[0].offsetWidth,height=element[0].offsetWidth;map_html=['<a href="https://www.google.ae/maps/place/'+formatted_address+"/@"+lat+","+lng+',17z" id="map" target="_blank">','<img src="https://maps.googleapis.com/maps/api/staticmap?zoom=14&size='+width+"x"+height+"&maptype=roadmap&markers=color:green%7Clabel:&bull;%7C"+lat+","+lng+'" width="100%">',"</a>"].join(""),
element.html(map_html)},search_location=function(address){geocoder.geocode({address:address,region:"UAE"},function(results,status){"OK"===status&&(lat=results[0].geometry.location.lat(),lng=results[0].geometry.location.lng(),formatted_address=results[0].formatted_address,scope.ctrlCoords="POINT ("+lat+" "+lng+")",console.log("directive - scope.ctrlCoords: ",scope.ctrlCoords),render_map())})};if(edit_mode){""!==attrs.ctrlAddress?search_location(attrs.ctrlAddress):(scope.ctrlCoords="POINT (25.2048493 55.270782800000006)",render_map());var address_el=angular.element(document.querySelector('[name="'+attrs.ctrlAddressField+'"]'));address_el.bind("blur",function(){search_location(address_el.val())})}else search_location(attrs.ctrlAddress)}}}}];angular.module("app").directive("mapLocation",MapLocation)}(window,window.angular),function(window,angular){"use strict";var NavBar=["$document","UserSession","Storage","CONFIG",function($document,UserSession,Storage,CONFIG){return{restrict:"E",template:function(){var history=Storage.Get(CONFIG.session_ns+"History")||[],previous=history[history.length-2],html_menu='<a href="#" title="Menu" class="icon-menu" nav-button></a>',html_back='<a href="#'+previous+'" title="Back" class="icon-arrow-left"></a>';return UserSession.CheckToken()&&history.length<=1?html_menu:html_back}}}];angular.module("app").directive("navBar",NavBar)}(window,window.angular),function(window,angular){"use strict";var NavButton=["$document",function(){return{restrict:"A",link:function(scope,element){var html=angular.element(document.querySelector("html")),toggle=function(){html.hasClass("menu--opened")?html.removeClass("menu--opened"):html.addClass("menu--opened")};element.on("click",function(e){e.preventDefault(),toggle()});var view=angular.element(document.querySelector(".views"));view.bind("click",function(e){"icon-menu"!==e.target.className&&html.removeClass("menu--opened")})}}}];angular.module("app").directive("navButton",NavButton)}(window,window.angular),function(window,angular){"use strict";var OpenModal=["Modal",function(Modal){return{restrict:"A",link:function(scope,element,attrs){element.on("click",function(e){e.preventDefault(),Modal.Open({url:attrs.openModal}).then(function(){"function"==typeof attrs.openModalCallback&&attrs.openModalCallback()})})}}}];angular.module("app").directive("openModal",OpenModal)}(window,window.angular),function(window,angular){"use strict";var Popover=[function(){return{restrict:"AE",templateUrl:function(element,attrs){return attrs.popoverUrl},link:function(scope,element,attrs){var pop_el=angular.element(document.querySelector('[popover-name="'+attrs.popoverName+'"]')),bt_close=angular.element(document.querySelector('[popover-name="'+attrs.popoverName+'"] .ui-popover__close'));scope[attrs.popoverName]={url:attrs.popoverUrl,callback:attrs.popoverCtrlCallback,callback_close:attrs.popoverCtrlCallbackClose,toggle:function(e){var _this=null;e&&(e.preventDefault(),_this=angular.element(e.currentTarget)),pop_el[0].offsetHeight>0?(pop_el.removeAttr("popover-opened"),e&&_this.removeClass("opened")):(pop_el.attr("popover-opened",""),e&&_this.addClass("opened"),scope[attrs.popoverName].callback&&"function"==typeof scope[scope[attrs.popoverName].callback]&&scope[scope[attrs.popoverName].callback]())},open:function(e){e&&e.preventDefault(),scope[attrs.popoverName].callback&&"function"==typeof scope[scope[attrs.popoverName].callback]&&scope[scope[attrs.popoverName].callback](),pop_el.removeAttr("popover-opened")},close:function(e){e&&e.preventDefault(),pop_el.removeAttr("popover-opened"),scope[attrs.popoverName].callback_close&&"function"==typeof scope[scope[attrs.popoverName].callback_close]&&scope[scope[attrs.popoverName].callback_close]()}},bt_close.bind("click",scope[attrs.popoverName].close)}}}];angular.module("app").directive("popover",Popover)}(window,window.angular),function(window,angular){"use strict";var RepeatEndCallback=[function(){return{restrict:"A",link:function(scope,element,attrs){var split=attrs.repeatEndCallback.split(","),callback=scope[split[0].replace(/\s/g,"")][split[1].replace(/\s/g,"")];scope.$last&&"function"==typeof callback&&callback()}}}];angular.module("app").directive("repeatEndCallback",RepeatEndCallback)}(window,window.angular),function(window,angular){"use strict";var SetDeviceInfo=[function(){return{restrict:"A",link:function(){}}}];angular.module("app").directive("setDeviceInfo",SetDeviceInfo)}(window,window.angular),function(window,angular){"use strict";var Tabs=["$timeout",function(){return{restrict:"A",link:function(scope,element){var tabs=element.find("a"),tabs_content=angular.element(document.querySelectorAll(".ui-tabs__content"));tabs.bind("click",function(e){e.preventDefault();var self=angular.element(this),content_id=self.attr("href");tabs.removeClass("ui-tabs__button--selected"),self.addClass("ui-tabs__button--selected"),tabs_content.removeClass("ui-tabs__content--selected"),angular.element(document.querySelector(content_id)).addClass("ui-tabs__content--selected")})}}}];angular.module("app").directive("tabs",Tabs)}(window,window.angular),function(window,angular){"use strict";var UpdateContent=["$timeout",function(){return{restrict:"AE",scope:{infinityLoading:"=",infinityFinish:"=",infinityCallback:"&",pullLoading:"=",pullCallback:"&"},link:function(scope,element,attrs){if(attrs.infinityCallback&&""!==attrs.infinityCallback){var target=element.children(),interval=null;scope.$watch("infinityLoading",function(n_val){if(n_val){var svg_el=['<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="20" height="20" fill="white">','<path opacity=".25" d="M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"/>','<path d="M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z">','<animateTransform attributeName="transform" type="rotate" from="0 16 16" to="360 16 16" dur="0.3s" repeatCount="indefinite" />',"</path>","</svg>"].join("");element.append('<div class="ui-infinity-icon">'+svg_el+"</div>")}else angular.element(document.querySelector(".ui-infinity-icon")).remove()}),scope.$watch("infinityFinish",function(n_val){n_val?element.append('<div class="ui-infinity-icon icon-logo"><!-- --></div>'):angular.element(document.querySelector(".ui-infinity-icon")).remove()}),element.on("scroll",function(){return scope.infinityLoading||scope.infinityFinish?!1:(interval&&clearInterval(interval),void(interval=setInterval(function(){clearInterval(interval);var scroll_top=element[0].scrollTop,element_height=element[0].clientHeight,target_height=(parseInt(target.css("margin-top"))+parseInt(target.css("margin-bottom")),target[0].clientHeight);Math.abs(scroll_top-target_height)<=element_height&&(scope.infinityLoading=!0,scope.$$phase||scope.$apply(),"function"==typeof scope.infinityCallback&&scope.infinityCallback.apply())},300)))})}if(attrs.pullCallback&&""!==attrs.pullCallback){var pull_loader_el=angular.element(document.querySelector(".ui-pull-loader"));scope.$watch("pullLoading",function(n_val){n_val||(pull_loader_el.css("height",0),window.setTimeout(function(){pull_loader_el.remove()},201))});{var touch_pos=0;new TouchHandler({distanceYToFire:50,negative:!0,target:element,preventOnMove:function(){return document.querySelector(".content").scrollTop<=0},fireOnStart:function(){touch_pos=event.touches[0].pageY,scope.pullLoading||(pull_loader_el.remove(),element.prepend('<span class="ui-pull-loader"></span>'),pull_loader_el=angular.element(document.querySelector(".ui-pull-loader")))},fireOnMove:function(e,top_position){var height=touch_pos-event.touches[0].pageY,final_height=Math.abs(height)<=50?Math.abs(height):50+(Math.abs(height)-50)/10;0>=top_position&&0>height&&pull_loader_el.css("height",final_height+"px")},fireOnEnd:function(e,unlock_x,unlock_y){if(scope.pullLoading)return!1;if(unlock_y){var svg=['<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="30" height="30" fill="#88979e">','<path opacity=".25" d="M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"/>','<path d="M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z">','<animateTransform attributeName="transform" type="rotate" from="0 16 16" to="360 16 16" dur="0.3s" repeatCount="indefinite" />',"</path>","</svg>"].join("");pull_loader_el.append(svg).addClass("ui-pull-loader--loading").css("height","50px"),scope.pullLoading=!0,scope.$$phase||scope.$apply(),"function"==typeof scope.pullCallback&&scope.pullCallback()}else pull_loader_el.removeAttr("style").find("svg").remove();touch_pos=0}})}}}}}];angular.module("app").directive("updateContent",UpdateContent)}(window,window.angular),function(window,angular){"use strict";var Upload=["$timeout",function($timeout){var template=['<div class="ui-crop-image">','<div class="ui-crop-image__header">','<a href="#" title="Cancel crop" class="ui-crop-image__close icon-close"></a>',"</div>",'<div class="ui-crop-image__content">','<span class="ui-crop-image__mask ui-crop-image__mask--top"><!-- --></span>','<span class="ui-crop-image__mask ui-crop-image__mask--bottom"><!-- --></span>',"</div>",'<div class="ui-crop-image__footer">','<a href="#" title="Save" class="ui-crop-image__save">Save</a>',"</div>","</div>"].join("");return{restrict:"A",scope:{ctrlField:"="},link:function(scope,element,attrs){var _file_ext,el_label=element.parent(),el_aspect=(attrs.name,attrs.uploadRatio&&""!==attrs.uploadRatio?attrs.uploadRatio:1),img_aspect=null,_dimensions={},render=function(obj){el_label.addClass("ui-file--preview"),el_label.find("span").remove(),el_label.find("img").remove(),el_label.find("canvas").remove(),el_label.append(obj.canvas),scope.ctrlField=obj.base64.replace(/data\:image\/(jpeg|jpg|png)\;base64\,/,""),scope.$$phase||scope.$apply()},close=function(e){e&&e.preventDefault(),angular.element(document.querySelector(".ui-crop-image")).remove()},change=function(event){_dimensions={outside:120,window_w:window.innerWidth,window_h:window.innerHeight,content_h:window.innerHeight-120,work_area_w:window.innerWidth,work_area_h:parseInt(window.innerWidth/el_aspect),mask_h:(window.innerHeight-120-parseInt(window.innerWidth/el_aspect))/2};var original_file=event.target.files[0];return original_file?-1==original_file.type.search(/jp(eg|g)|png/g)?(alert("Invalid file type.\nUse jpeg or png only."),!1):(_file_ext=original_file.type,void loadImage.parseMetaData(original_file,function(data){var options={canvas:!0};data.exif&&(options.orientation=data.exif.get("Orientation"));var temp_img,temp_file=original_file,temp_url=window.URL||window.webkitURL;temp_img=new Image,temp_img.onload=function(){img_aspect=[6,8,5,7].join(",").indexOf(options.orientation)<0?this.height/this.width:this.width/this.height,1>=img_aspect?(options.maxHeight=_dimensions.work_area_h,options.minHeight=_dimensions.work_area_h):options.maxWidth=_dimensions.work_area_w,loadImage(original_file,function(canvas){crop(canvas)},options)},temp_img.src=temp_url.createObjectURL(temp_file)})):!1},crop=function(canvas){var el_body=angular.element(document.querySelector("body"));el_body.append(template);var el_crop=angular.element(document.querySelector(".ui-crop-image")),el_mask_top=angular.element(document.querySelector(".ui-crop-image__mask--top")),el_mask_bottom=angular.element(document.querySelector(".ui-crop-image__mask--bottom")),el_content=angular.element(document.querySelector(".ui-crop-image__content")),el_canvas=angular.element(canvas),el_save=angular.element(document.querySelector(".ui-crop-image__save")),el_close=angular.element(document.querySelector(".ui-crop-image__close"));el_crop.addClass("ui-crop-image--show"),el_mask_top.css("height",_dimensions.mask_h+"px"),el_mask_bottom.css("height",_dimensions.mask_h+"px"),el_content.css("height",_dimensions.content_h+"px").append(el_canvas);var start_canvas_y,start_canvas_x,start_pos_y,start_pos_x,final_pos,top_limit=_dimensions.mask_h,left_limit=0,bottom_limit=canvas.height-_dimensions.content_h+_dimensions.mask_h,right_limit=canvas.width-_dimensions.content_h;el_canvas.css({top:top_limit+"px",left:left_limit+"px"}).on("touchstart",function(e){e.preventDefault();var touches=e.touches,pos_y=touches[0].pageY,pos_x=touches[0].pageX;start_canvas_y=parseInt(el_canvas.css("top")),start_canvas_x=parseInt(el_canvas.css("left")),1==touches.length&&(start_pos_y=pos_y,start_pos_x=pos_x)}).on("touchmove",function(e){e.preventDefault();var touches=e.touches,pos_y=Math.abs(touches[0].pageY),pos_x=Math.abs(touches[0].pageX),distance=0;1==touches.length&&(img_aspect>=1?(distance=-1*(start_pos_y-pos_y),final_pos=start_canvas_y+distance,el_canvas.css("top",final_pos+"px")):(distance=-1*(start_pos_x-pos_x),final_pos=start_canvas_x+distance,el_canvas.css("left",final_pos+"px")))}).on("touchend",function(e){e.preventDefault(),img_aspect>=1?(final_pos>top_limit?(el_canvas.addClass("ui-crop-image--adjustment_move").css("top",top_limit+"px"),$timeout(function(){el_canvas.removeClass("ui-crop-image--adjustment_move")},301),final_pos=top_limit):0>final_pos&&Math.abs(final_pos)>bottom_limit&&(el_canvas.addClass("ui-crop-image--adjustment_move").css("top",-1*bottom_limit+"px"),$timeout(function(){el_canvas.removeClass("ui-crop-image--adjustment_move")},301),final_pos=-1*bottom_limit),final_pos-=top_limit):(final_pos>left_limit?(el_canvas.addClass("ui-crop-image--adjustment_move").css("left",left_limit+"px"),$timeout(function(){el_canvas.removeClass("ui-crop-image--adjustment_move")},301),final_pos=left_limit):0>final_pos&&Math.abs(final_pos)>right_limit&&(el_canvas.addClass("ui-crop-image--adjustment_move").css("left",-1*right_limit+"px"),$timeout(function(){el_canvas.removeClass("ui-crop-image--adjustment_move")},301),final_pos=-1*right_limit),final_pos-=left_limit)}),el_save.on("click",function(e){e.preventDefault();var final_canvas=loadImage.scale(canvas,{left:img_aspect>=1?0:Math.abs(final_pos),top:img_aspect>=1?Math.abs(final_pos):0,sourceWidth:_dimensions.window_w,sourceHeight:_dimensions.work_area_h,minWidth:_dimensions.window_w});render({canvas:final_canvas,base64:final_canvas.toDataURL(_file_ext)}),close()}),el_close.on("click",close)};element[0].addEventListener("change",change,!0)}}}];angular.module("app").directive("upload",Upload)}(window,window.angular);